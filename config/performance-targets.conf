# performance-targets.conf -- Performance thresholds for VaultWarden-OCI-Slim
# Optimized for 1 OCPU/6GB OCI A1 Flex deployment
# All hardcoded thresholds from perf-monitor.sh and monitor.sh externalized here

# ================================
# CPU THRESHOLDS (Single Core Context)
# ================================
CPU_WARNING_THRESHOLD=70
CPU_CRITICAL_THRESHOLD=90

# Single CPU load thresholds (critical for 1 OCPU)
LOAD_WARNING_THRESHOLD=1.0
LOAD_CRITICAL_THRESHOLD=1.5

# ================================
# MEMORY THRESHOLDS (6GB System)
# ================================
MEMORY_WARNING_THRESHOLD=70
MEMORY_CRITICAL_THRESHOLD=85

# Container memory targets (MB) - Total target: 672MB
VAULTWARDEN_MEMORY_TARGET=256
CADDY_MEMORY_TARGET=128
FAIL2BAN_MEMORY_TARGET=64
BACKUP_MEMORY_TARGET=128
WATCHTOWER_MEMORY_TARGET=64
DDCLIENT_MEMORY_TARGET=32
TOTAL_CONTAINER_MEMORY_TARGET=672

# Memory usage as percentage of 6GB system
SYSTEM_MEMORY_WARNING_PCT=70
SYSTEM_MEMORY_CRITICAL_PCT=85

# ================================
# DISK USAGE THRESHOLDS
# ================================
DISK_WARNING_THRESHOLD=70
DISK_CRITICAL_THRESHOLD=85

# Disk I/O rate thresholds (MB/s)
DISK_READ_WARNING_RATE=50
DISK_READ_CRITICAL_RATE=100
DISK_WRITE_WARNING_RATE=50
DISK_WRITE_CRITICAL_RATE=100

# ================================
# SQLITE DATABASE THRESHOLDS
# ================================
SQLITE_SIZE_WARNING_MB=300
SQLITE_SIZE_CRITICAL_MB=500

# SQLite fragmentation thresholds
SQLITE_FRAGMENTATION_WARNING=1.3
SQLITE_FRAGMENTATION_CRITICAL=1.5

# SQLite WAL file thresholds (MB)
SQLITE_WAL_WARNING_MB=10
SQLITE_WAL_CRITICAL_MB=50

# SQLite query performance thresholds (seconds)
SQLITE_QUERY_WARNING_S=0.1
SQLITE_QUERY_CRITICAL_S=0.5

# SQLite free space thresholds (percentage)
SQLITE_FREELIST_WARNING_PCT=10
SQLITE_FREELIST_CRITICAL_PCT=15

# ================================
# CONTAINER THRESHOLDS
# ================================
# Container CPU usage thresholds (percentage)
CONTAINER_CPU_WARNING=50
CONTAINER_CPU_CRITICAL=80

# Container memory usage thresholds (percentage of allocated)
CONTAINER_MEMORY_WARNING=80
CONTAINER_MEMORY_CRITICAL=95

# Container restart thresholds
CONTAINER_RESTART_WARNING=3
CONTAINER_RESTART_CRITICAL=5

# ================================
# NETWORK THRESHOLDS
# ================================
NETWORK_ERROR_RATE_WARNING=0.1
NETWORK_ERROR_RATE_CRITICAL=1.0

NETWORK_LATENCY_WARNING_MS=100
NETWORK_LATENCY_CRITICAL_MS=500

# Connection count thresholds
NETWORK_CONNECTION_WARNING=100
NETWORK_CONNECTION_CRITICAL=200

# ================================
# BACKUP THRESHOLDS
# ================================
BACKUP_AGE_WARNING_HOURS=168    # 1 week
BACKUP_AGE_CRITICAL_HOURS=336   # 2 weeks

BACKUP_SIZE_MIN_MB=1
BACKUP_SIZE_MAX_MB=1000

# ================================
# SECURITY THRESHOLDS
# ================================
FAIL2BAN_BANNED_IP_WARNING=10
FAIL2BAN_BANNED_IP_CRITICAL=50

SSL_CERT_EXPIRY_WARNING_DAYS=30
SSL_CERT_EXPIRY_CRITICAL_DAYS=7

# ================================
# BENCHMARK TARGETS (1 OCPU)
# ================================
BENCHMARK_CPU_ACCEPTABLE_S=30
BENCHMARK_MEMORY_ACCEPTABLE_S=5
BENCHMARK_DISK_ACCEPTABLE_S=10
BENCHMARK_SQLITE_QUERY_ACCEPTABLE_MS=50

# ================================
# ALERT SUPPRESSION
# ================================
# Minimum time between duplicate alerts (seconds)
ALERT_SUPPRESSION_INTERVAL=3600

# Alert escalation thresholds
ALERT_ESCALATION_COUNT=3
ALERT_ESCALATION_INTERVAL=1800
